(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-363cbde6"],{"2e33":function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("el-breadcrumb",{attrs:{"separator-class":"el-icon-arrow-right"}},[a("el-breadcrumb-item",{attrs:{to:{path:"/home"}}},[t._v("首页")]),a("el-breadcrumb-item",[t._v("处理任务")]),a("el-breadcrumb-item",[t._v("我的任务")])],1),a("el-card",[a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:8}},[a("el-input",{attrs:{placeholder:"请输入内容",clearable:""},on:{clear:function(e){return t.handleCurrentChange(1)}},model:{value:t.queryInfo.query,callback:function(e){t.$set(t.queryInfo,"query",e)},expression:"queryInfo.query"}},[a("el-button",{attrs:{slot:"append",icon:"el-icon-search"},on:{click:function(e){return t.handleCurrentChange(1)}},slot:"append"})],1)],1)],1),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticStyle:{width:"100%"},attrs:{data:t.datalist,stripe:"",border:""}},[a("el-table-column",{attrs:{type:"index"}}),a("el-table-column",{attrs:{prop:"data_id",label:"数据编号","min-width":"100"}}),a("el-table-column",{attrs:{prop:"data_name",label:"数据名称","min-width":"100"}}),a("el-table-column",{attrs:{prop:"age",label:"年龄","min-width":"60"}}),a("el-table-column",{attrs:{prop:"data_dimen",label:"数据维度","min-width":"100"}}),a("el-table-column",{attrs:{prop:"data_space",label:"物理间距","min-width":"200"}}),a("el-table-column",{attrs:{prop:"coordinate",label:"起点坐标","min-width":"280"}}),a("el-table-column",{attrs:{label:"下载数据","min-width":"80"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{size:"mini",type:"primary"},on:{click:function(a){return t.downloadOriginalData(e.row.data_id)}}},[a("i",{staticClass:"el-icon-download"})])]}}])}),a("el-table-column",{attrs:{prop:"upload_user",label:"上传用户",width:"100"}}),a("el-table-column",{attrs:{label:"数据上传时间","min-width":"130"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s(e.row.upload_time))]}}])}),a("el-table-column",{attrs:{label:"AI建模","min-width":"80"},scopedSlots:t._u([{key:"default",fn:function(e){return["0"===e.row.ai_status?a("span",[t._v("未运行")]):t._e(),"1"===e.row.ai_status?a("span",[t._v("计算中")]):t._e(),"2"===e.row.ai_status?a("span",[a("el-button",{attrs:{size:"mini",type:"primary"},on:{click:function(a){return t.downloadAIData(e.row.data_id)}}},[a("i",{staticClass:"el-icon-download"})])],1):t._e()]}}])}),a("el-table-column",{attrs:{label:"AI完成时间","min-width":"140"},scopedSlots:t._u([{key:"default",fn:function(e){return[null===e.row.ai_finish_time?a("span",[t._v("未完成")]):t._e(),null!==e.row.ai_finish_time?a("span",[t._v(t._s(e.row.ai_finish_time))]):t._e()]}}])}),a("el-table-column",{attrs:{label:"上传","min-width":"80"},scopedSlots:t._u([{key:"default",fn:function(e){return[null===e.row.finish_time?a("span",[a("el-upload",{staticClass:"upload-demo",staticStyle:{display:"inline"},attrs:{action:"#","http-request":function(a){return t.uploadSegData(a,e.row.data_id)},"show-file-list":!1,"before-upload":t.checkUploadZip}},[a("el-button",{attrs:{size:"mini",type:"primary",icon:"el-icon-upload2"}})],1)],1):t._e(),null!==e.row.finish_time?a("span",[t._v("已完成")]):t._e()]}}])},[a("template",{slot:"header"},[a("span",{staticStyle:{cursor:"pointer"},on:{click:function(e){t.dialogVisible=!0}}},[t._v(" 上传 "),a("i",{staticClass:"el-icon-question",staticStyle:{"font-size":"14px"}})])])],2),a("el-table-column",{attrs:{label:"结果上传时间","min-width":"140"},scopedSlots:t._u([{key:"default",fn:function(e){return[null===e.row.finish_time?a("span",[t._v("无")]):t._e(),null!==e.row.finish_time?a("span",[t._v(t._s(e.row.finish_time))]):t._e()]}}])})],1),a("el-pagination",{attrs:{"current-page":t.queryInfo.pagenum,"page-sizes":[5,15,20],"page-size":t.queryInfo.pagesize,layout:"total, sizes, prev, pager, next, jumper",total:t.total,background:""},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}})],1),a("el-dialog",{staticClass:"tipdialog",attrs:{title:"提示",visible:t.dialogVisible,width:"30%"},on:{"update:visible":function(e){t.dialogVisible=e}}},[a("p",[t._v("请上传一个zip压缩包，里面包含8个STL模型，文件命名规则如下：")]),a("p",[t._v("肺动脉： PA.stl")]),a("p",[t._v("左心房肺静脉：LA.stl")]),a("p",[t._v("上腔静脉：SVC.stl")]),a("p",[t._v("主动脉：AO.stl")]),a("p",[t._v("右心房：RA.stl")]),a("p",[t._v("右心室：RV.stl")]),a("p",[t._v("左心室：LV.stl")]),a("p",[t._v("心包：EE.stl")]),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary"},on:{click:function(e){t.dialogVisible=!1}}},[t._v("确 定")])],1)]),a("el-dialog",{attrs:{title:"上传",visible:t.uploadDialogVisible,width:"25%"},on:{"update:visible":function(e){t.uploadDialogVisible=e},close:t.interuptUpload}},[a("div",{staticStyle:{"text-align":"center"}},[a("el-progress",{staticStyle:{"margin-left":"20px"},attrs:{type:"circle",percentage:t.uploadDiag.progressPercent}}),a("h5",[t._v(t._s(t.uploadDiag.text))])],1)])],1)},i=[],l=(a("b0c0"),a("a9e3"),a("b680"),a("8a79"),a("96cf"),a("1da1")),r={data:function(){return{loading:!1,dialogVisible:!1,uploadDialogVisible:!1,queryInfo:{query:"",pagenum:1,pagesize:5},datalist:[],total:0,uploadDiag:{progressPercent:0,text:"正在上传"},source:null}},methods:{getDataList:function(){var t=this;return Object(l["a"])(regeneratorRuntime.mark((function e(){var a,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.loading=!0,e.next=3,t.$http.post("data/mytodolist",{queryinfo:t.queryInfo});case 3:a=e.sent,n=a.data,100===n.status&&(t.datalist=n.data.list,t.total=n.data.total,t.loading=!1);case 6:case"end":return e.stop()}}),e)})))()},handleSizeChange:function(t){this.queryInfo.pagesize=t,this.queryInfo.pagenum=1,this.getDataList()},handleCurrentChange:function(t){this.queryInfo.pagenum=t,this.getDataList()},downloadOriginalData:function(t){var e=this;return Object(l["a"])(regeneratorRuntime.mark((function a(){var n;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:n=e.$http.defaults.baseURL,window.location=n+"/data/dicomzip/"+t;case 2:case"end":return a.stop()}}),a)})))()},downloadAIData:function(t){var e=this;return Object(l["a"])(regeneratorRuntime.mark((function a(){var n;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:e.$message({message:"正在生成压缩包",type:"success"}),n=e.$http.defaults.baseURL,window.location=n+"/data/aistl/"+t+"/11111111";case 3:case"end":return a.stop()}}),a)})))()},checkUploadZip:function(t){return!1===t.name.endsWith(".zip")?(this.$message({message:"请上传zip格式压缩包",type:"error"}),!1):t.size>104857600?(this.$message({message:"文件大小不超过100m",type:"error"}),!1):void 0},uploadSegData:function(t,e){var a=this;return Object(l["a"])(regeneratorRuntime.mark((function n(){var i,l,r,o;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return i=new FormData,i.append("zipfile",t.file),i.append("dataid",e),a.$message({type:"warning",message:"数据正在上传"}),a.source=a.$http.CancelToken.source(),l={"Content-Type":"multipart/form-data",cancelToken:a.source.token,onUploadProgress:function(t){a.uploadDiag.progressPercent=Number((t.loaded/t.total*100).toFixed(2)),100===a.uploadDiag.progressPercent&&(a.uploadDiag.text="正在解析")}},a.uploadDialogVisible=!0,a.uploadDiag.progressPercent=0,a.uploadDiag.text="正在上传",n.next=11,a.$http.post("data/uploadstl",i,l);case 11:r=n.sent,o=r.data,a.uploadDialogVisible=!1,100===o.status&&(a.$message({type:"success",message:o.data}),a.getDataList());case 15:case"end":return n.stop()}}),n)})))()},interuptUpload:function(){this.uploadDiag.progressPercent<100&&this.source.cancel()}},created:function(){this.getDataList()}},o=r,s=(a("a05e"),a("2877")),u=Object(s["a"])(o,n,i,!1,null,"dee96f0a",null);e["default"]=u.exports},"38c3":function(t,e,a){},a05e:function(t,e,a){"use strict";var n=a("38c3"),i=a.n(n);i.a}}]);
//# sourceMappingURL=chunk-363cbde6.1656048607808.js.map